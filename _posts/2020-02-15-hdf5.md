---
layout: post
title: "HDF5 æ•°æ®æ–‡ä»¶ç®€ä»‹"
tagline: "ç®€å•ä»‹ç»å¹¶æ€»ç»“ HDF5 æ•°æ®æ–‡ä»¶çš„ä½¿ç”¨ ..."
#categories: 
#author: ""
#meta: ""
---
åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ]({{ site.url }}/2020/01/26/CSV.html)ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ç”¨ **CSV** (comma separated values) æ–‡ä»¶æ¥å‚¨å­˜æ•°æ®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ[**HDF5**](https://www.hdfgroup.org/solutions/hdf5/) (Hierarchical Data Format) ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„è·¨å¹³å°æ•°æ®å‚¨å­˜æ–‡ä»¶ã€‚

[**HDF5**](https://www.hdfgroup.org/solutions/hdf5/) (Hierarchical Data Format) ç”±ç¾å›½**ä¼Šåˆ©è¯ºä¼Šå¤§å­¦å„å·´çº³-é¦™æ§Ÿåˆ†æ ¡** [**UIUC**](http://www.illinois.edu) (University of Illinois at Urbana-Champaign) å¼€å‘ï¼Œå¯ä»¥å­˜å‚¨ä¸åŒç±»å‹çš„å›¾åƒå’Œæ•°ç æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒç±»å‹çš„æœºå™¨ä¸Šä¼ è¾“ï¼ŒåŒæ—¶è¿˜æœ‰ç»Ÿä¸€å¤„ç†è¿™ç§æ–‡ä»¶æ ¼å¼çš„å‡½æ•°åº“ã€‚

## **HDF5 ç»“æ„**

<hr style="height:5px;" />

**HDF5** æ–‡ä»¶ä¸€èˆ¬ä»¥ **.h5** æˆ–è€… **.hdf5** ä½œä¸ºåç¼€åï¼Œéœ€è¦ä¸“é—¨çš„è½¯ä»¶æ‰èƒ½æ‰“å¼€é¢„è§ˆæ–‡ä»¶çš„å†…å®¹ã€‚**HDF5** æ–‡ä»¶ç»“æ„ä¸­æœ‰ **2 primary objects:** **Groups** å’Œ **Datasets**ã€‚

- **Groups** å°±ç±»ä¼¼äºæ–‡ä»¶å¤¹ï¼Œæ¯ä¸ª **HDF5** æ–‡ä»¶å…¶å®å°±æ˜¯**æ ¹ç›®å½•** (root) **group** `'/'`ã€‚
- **Datasets** ç±»ä¼¼äº [**NumPy**](https://numpy.org) ä¸­çš„æ•°ç»„ array ã€‚

æ¯ä¸ª dataset å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†: **åŸå§‹æ•°æ® (raw) data values** å’Œ **å…ƒæ•°æ® metadata** (a set of data that describes and gives information about other data => raw data)ã€‚

``` python
+-- Dataset
|   +-- (Raw) Data Values (eg: a 4 x 5 x 6 matrix)
|   +-- Metadata
|   |   +-- Dataspace (eg: Rank = 3, Dimensions = {4, 5, 6})
|   |   +-- Datatype (eg: Integer)
|   |   +-- Properties (eg: Chuncked, Compressed)
|   |   +-- Attributes (eg: attr1 = 32.4, attr2 = "hello", ...)
|
```

ä»ä¸Šé¢çš„ç»“æ„ä¸­å¯ä»¥çœ‹å‡ºï¼š

* **Dataspace** ç»™å‡ºåŸå§‹æ•°æ®çš„**ç§©** (Rank) å’Œ**ç»´åº¦** (dimension)
* **Datatype** ç»™å‡ºæ•°æ®ç±»å‹
* **Properties** è¯´æ˜è¯¥ dataset çš„**åˆ†å—å‚¨å­˜**ä»¥åŠ**å‹ç¼©**æƒ…å†µ 
	+ **Chunked**: Better access time for subsets; extendible
	+ **Chunked & Compressed**: Improves storage efficiency, transmission speed
* **Attributes** ä¸ºè¯¥ dataset çš„å…¶ä»–è‡ªå®šä¹‰å±æ€§
 
æ•´ä¸ª **HDF5** æ–‡ä»¶çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š
 
``` python
+-- /
|   +-- group_1
|   |   +-- dataset_1_1
|   |   |   +-- attribute_1_1_1
|   |   |   +-- attribute_1_1_2
|   |   |   +-- ...
|   |   |
|   |   +-- dataset_1_2
|   |   |   +-- attribute_1_2_1
|   |   |   +-- attribute_1_2_2
|   |   |   +-- ...
|   |   |
|   |   +-- ...
|   |
|   +-- group_2
|   |   +-- dataset_2_1
|   |   |   +-- attribute_2_1_1
|   |   |   +-- attribute_2_1_2
|   |   |   +-- ...
|   |   |
|   |   +-- dataset_2_2
|   |   |   +-- attribute_2_2_1
|   |   |   +-- attribute_2_2_2
|   |   |   +-- ...
|   |   |
|   |   +-- ...
|   |
|   +-- ...
|
```

## **HDF5 ä¸‹è½½ä¸å®‰è£…**

<hr style="height:5px;" />

ä¸‹è½½å®‰è£… **HDF5** çš„æ–¹æ³•æœ‰å¤šç§ï¼ŒMac ä¸‹å¯ä»¥ç›´æ¥ `brew install hdf5`ï¼Œå…¶ä»– Linux ç³»ç»Ÿä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹åº”**å®‰è£…åŒ…ç®¡ç†å·¥å…·**ä¸‹è½½å°±è¡Œäº†ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å»å®˜ç½‘ <https://portal.hdfgroup.org/display/support/Downloads> ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„å‹ç¼©åŒ…ã€‚

ä¸‹è½½å®‰è£…å®Œæˆåå¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨ `h5dump` å‘½ä»¤æŸ¥çœ‹ **HDF5** æ–‡ä»¶çš„å†…å®¹ã€‚å®˜ç½‘åŒæ—¶æä¾›ä¸€ä¸ª **JAVA** å¼€å‘çš„ **HDF5** æ•°æ®å¯è§†åŒ–å·¥å…· [**HDFView**](https://portal.hdfgroup.org/display/support/Download+HDFView)ï¼Œæ”¯æŒå…¨å¹³å°æŸ¥çœ‹æ•°æ®, ä½†æ˜¯æ³¨æ„æ‰“å¼€æ–‡ä»¶çš„è·¯å¾„ä¸­ä¸è¦åŒ…å«ä¸­æ–‡ã€‚

* <font color="#26975b"><b>æ³¨æ„:</b></font>å½“ä¸º **python** å®‰è£… **HDF5** çš„ [**h5py**]( http://www.h5py.org) åº“æ—¶ï¼Œä½¿ç”¨ `conda install h5py` æˆ–è€… `pip install h5py` åä¹Ÿä¼šå®‰è£…éƒ¨åˆ†äºŒè¿›åˆ¶æ–‡ä»¶ (å¦‚ `h5dump`, `h5cc/h5c++`,  `h5fc` ç­‰) å’Œåº“æ–‡ä»¶ï¼Œä½†æ˜¯å¯èƒ½ä¸å®Œæ•´ï¼Œå¯¼è‡´ **HDF5** çš„ C/C++ ç¼–è¯‘å™¨ `h5cc/h5c++` å’Œ Fortran ç¼–è¯‘å™¨ `h5fc` æ— æ³•æ­£å¸¸å·¥ä½œã€‚

* <font color="#26975b"><b>è§£å†³åŠæ³•:</b></font>è‹¥ `h5c++` æ— æ³•æ­£å¸¸ç¼–è¯‘ C++ æ–‡ä»¶ï¼Œç»ˆç«¯è¾“å…¥ `which h5c++`, è‹¥æ˜¾ç¤ºè¯¥äºŒè¿›åˆ¶æ–‡ä»¶åœ¨ **python** çš„äºŒè¿›åˆ¶ (binary) æ–‡ä»¶å¤¹ **bin** å†…ï¼Œåˆ™åªéœ€æ‰¾åˆ° `brew` æˆ–è€…å…¶ä»–**å®‰è£…åŒ…ç®¡ç†å·¥å…·**ä¸‹è½½çš„ `h5c++` (ä¸€èˆ¬åœ¨ `/usr/local/bin` å†…) æˆ–è€…å®˜ç½‘ä¸‹è½½è§£å‹åçš„ `h5c++`ï¼Œåœ¨æ ¹ç›®å½• (~) ä¸‹çš„ .bashrc æ–‡ä»¶ (æˆ–è€…å…¶ä»– shell, å¦‚ zsh çš„é…ç½®æ–‡ä»¶ .zshrc) å†…æ·»åŠ  `alias h5c++ = /usr/local/bin/h5c++` å°±å¯ä»¥äº†ã€‚
<br><br>
è‹¥æ˜¯æƒ³ç”¨ `clang++` æˆ–è€… `g++` è€Œé `h5c++` ç¼–è¯‘, å…¶ä¸­åªè¦æ·»åŠ ä¸€äº›**å¤´æ–‡ä»¶** (-I) å’Œ**åº“æ–‡ä»¶** (-L) çš„ **flags** å°±è¡Œäº†ã€‚é¦–å…ˆç¡®è®¤ `h5c++` å¯ä»¥æ­£å¸¸ç¼–è¯‘åï¼Œåœ¨ç»ˆç«¯è¾“å…¥ `h5c++ -show`, ä¼šæ˜¾ç¤º 
`CXX_COMPILER` + `CXX_FLAGS`, ä¾‹å¦‚: `g++ -I/usr/local/opt/szip/include -L/usr/local/Cellar/hdf5/1.10.6/lib /usr/local/Cellar/hdf5/1.10.6/lib/libhdf5_hl_cpp.a /usr/local/Cellar/hdf5/1.10.6/lib/libhdf5_cpp.a /usr/local/Cellar/hdf5/1.10.6/lib/libhdf5_hl.a /usr/local/Cellar/hdf5/1.10.6/lib/libhdf5.a -L/usr/local/opt/szip/lib -lsz -lz -ldl -lm`
, æ•…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `CXX_COMPILER` + `XXX.cpp` + `CXX_FLAGS` æ¥ç¼–è¯‘ C++ æ–‡ä»¶ (å› ä¸ºç¼–è¯‘ä¾èµ–å…³ç³»ï¼Œ`CXX_FLAGS` é€šå¸¸æ”¾åœ¨æœ€åï¼Œ`XXX.cpp` æ”¾åœ¨ `CXX_FLAGS` ä¹‹å‰ï¼Œå¦åˆ™å¯èƒ½ä¼šæ— æ³•æˆåŠŸç¼–è¯‘) ã€‚

## **Python è¯»å†™ HDF5 æ–‡ä»¶**

<hr style="height:5px;" />

**HDF5** çš„ **python** åº“ [**h5py**]( http://www.h5py.org) è°ƒç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œæˆ‘åœ¨è¿™ç»™å‡ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

``` python
#!/usr/bin/python
# -*- coding: UTF-8 -*-
#
# Created by WW on Jan. 26, 2020
# All rights reserved.
#

import h5py
import numpy as np

def main():
	#===================================================================================
	# Create a HDF5 file.
	f = h5py.File("h5py_example.hdf5", "w") 	# mode = {'w', 'r', 'a'}

	# Create two groups under root '/'.
	g1 = f.create_group("bar1")
	g2 = f.create_group("bar2")

	# Create a dataset under root '/'.
	d = f.create_dataset("dset", data=np.arange(16).reshape([4, 4]))

	# Add two attributes to dataset 'dset'
	d.attrs["myAttr1"] = [100, 200]
	d.attrs["myAttr2"] = "Hello, world!"

	# Create a group and a dataset under group "bar1".
	c1 = g1.create_group("car1")
	d1 = g1.create_dataset("dset1", data=np.arange(10))

	# Create a group and a dataset under group "bar2".
	c2 = g2.create_group("car2")
	d2 = g2.create_dataset("dset2", data=np.arange(10))

	# Save and exit the file.
	f.close()

	''' h5py_example.hdf5 file structure
	+-- '/'
	|   +--	group "bar1"
	|   |   +-- group "car1"
	|   |   |   +-- None
	|   |   |   
	|   |   +-- dataset "dset1"
	|   |
	|   +-- group "bar2"
	|   |   +-- group "car2"
	|   |   |   +-- None
	|   |   |
	|   |   +-- dataset "dset2"
	|   |   
	|   +-- dataset "dset"
	|   |   +-- attribute "myAttr1"
	|   |   +-- attribute "myAttr2"
	|   |   
	|   
	'''

	#===================================================================================
	# Read HDF5 file.
	f = h5py.File("h5py_example.hdf5", "r") 	# mode = {'w', 'r', 'a'}

	# Print the keys of groups and datasets under '/'.
	print(f.filename, ":")
	print([key for key in f.keys()], "\n")  

	#===================================================
	# Read dataset 'dset' under '/'.
	d = f["dset"]

	# Print the data of 'dset'.
	print(d.name, ":")
	print(d[:])

	# Print the attributes of dataset 'dset'.
	for key in d.attrs.keys():
		print(key, ":", d.attrs[key])

	print()

	#===================================================
	# Read group 'bar1'.
	g = f["bar1"]

	# Print the keys of groups and datasets under group 'bar1'.
	print([key for key in g.keys()])

	# Three methods to print the data of 'dset1'.
	print(f["/bar1/dset1"][:])		# 1. absolute path

	print(f["bar1"]["dset1"][:])	# 2. relative path: file[][]

	print(g['dset1'][:])		# 3. relative path: group[]



	# Delete a database.
	# Notice: the mode should be 'a' when you read a file.
	'''
	del g["dset1"]
	'''

	# Save and exit the file
	f.close()

if __name__ == "__main__":
    main()

```

## **C++ è¯»å†™ HDF5 æ–‡ä»¶**

<hr style="height:5px;" />

**C++** è¯»å†™ **HDF5** æ–‡ä»¶æ¯”è¾ƒå¤æ‚ï¼Œå‚è€ƒå®˜ç½‘ç»™å‡ºçš„ Examplesï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªåˆ›å»º **HDF5** æ–‡ä»¶çš„ä¾‹å­å’Œä¸€ä¸ªè¯»å†™ **HDF5** æ–‡ä»¶çš„ä¾‹å­:

`1. h5cpp_creating.cpp:`

``` cpp
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * Copyright Â© 2020 Wei Wang.						       *
 * Created by WW on 2020/01/26.	                                               *
 * All rights reserved.							       *
 *	                                                                       *
 * This example illustrates how to create a dataset that is a 4 x 6 array.     *
 * Reference: HDF5 Tutorial (https://portal.hdfgroup.org/display/HDF5/HDF5)    *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

//
// h5cpp_creating.cpp
// CPP
//

#include <iostream>
#include <string>
#include "H5Cpp.h"

#ifndef _H5_NO_NAMESPACE_
using namespace H5;
#ifndef _H5_NO_STD_
    using std::cout;
    using std::endl;
#endif /* _H5_NO_STD_ */        
#endif /* _H5_NO_NAMESPACE_ */

#define PI 3.1415926535

/* 
 *  Define the names of HDF5 file, groups, datasets, and attributes.
 *  Use H5::H5std_string for name strings.
 */
const H5std_string FILE_NAME("h5cpp_example.hdf5");
const H5std_string GROUP_NAME("group1");
const H5std_string DATASET_NAME("dset");
const H5std_string ATTR_NAME1("myAttr1");
const H5std_string ATTR_NAME2("myAttr2");

const int DIM0 = 4;       // dataset dimensions
const int DIM1 = 6;
const int RANK = 2;

int main (int argc, char **argv)
{
    // Try block to detect exceptions raised by any of the calls inside it.
    try
    {
    	/* 
         * Turn off the auto-printing when failure occurs so that we can
    	 * handle the errors appropriately.
         */
    	Exception::dontPrint();

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

        double data[DIM0][DIM1];	    // buffer for data to write

        for (int i = 0; i < DIM0; i++)
    		for (int j = 0; j < DIM1; j++)
    	 		data[i][j] = (i + 1) * PI + j;
    	
    	
    	// Create a new file using the default property lists.
        // H5::H5F_ACC_TRUNC : create a new file or overwrite an existing file.
    	H5File file(FILE_NAME, H5F_ACC_TRUNC);

        // Create a group under root '/'.
    	Group group(file.createGroup(GROUP_NAME));
    	
        
        // Use H5::hsize_t (similar to int) for dimensions.
    	hsize_t dims[RANK];               // dataset dimensions
    	dims[0] = DIM0;
    	dims[1] = DIM1;
    	
        // Create the dataspace for a dataset first.
    	DataSpace dataspace(RANK, dims);
    	
    	// Create the dataset under group with specified dataspace.      
    	DataSet dataset = group.createDataSet(DATASET_NAME, PredType::NATIVE_DOUBLE, dataspace);

        // Write data in buffer to dataset.
    	dataset.write(data, PredType::NATIVE_DOUBLE);

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 

        int attr1_data[2] = {100, 200};          // buffer for attribute data to wirte

        hsize_t attr1_dims[1] = {2};             // attribute dimension, rank = 1
        
        // Create the dataspace for an attribute first.
        DataSpace attr1_dataspace(1, attr1_dims);         // rank = 1

        // Create the attribute of dataset with specified dataspace.
        Attribute attribute1 = dataset.createAttribute(ATTR_NAME1, PredType::STD_I32BE, attr1_dataspace);
        
        // Write data in buffer to attribute.
        attribute1.write(PredType::NATIVE_INT, attr1_data);

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 

        /* String Data */

        char attr2_data[30];    // buffer for attribute data to wirte 
    	sprintf(attr2_data, "hello, world!\nAuthor: Wei Wang");

        hsize_t attr2_dims[1] = {30};       // attribute dimension, rank = 1

        // Create the dataspace for an attribute first.
        DataSpace attr2_dataspace(1, attr2_dims);       // rank = 1

        // Create the attribute of dataset with specified dataspace.
        Attribute attribute2 = dataset.createAttribute(ATTR_NAME2, PredType::NATIVE_CHAR, attr2_dataspace);
        
        // Write data in buffer to attribute.
        attribute2.write(PredType::NATIVE_CHAR, attr2_data);

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 

        // Save and exit the group.
    	group.close();
        // Save and exit the file.
    	file.close();

        /* h5cpp_example.hdf5 file structure
         * +-- '/'
         * |   +-- group 'group1'
         * |   |   +-- dataset 'dset'
         * |   |   |   +-- attribute 'myAttr1'
         * |   |   |   +-- attribute 'myAttr2'
         * |   |   |
         * |   |
         * |
         */

    }  // end of try block

    
    // Catch failure caused by the H5File operations.
    catch(FileIException error)
    {
    	error.printErrorStack();
    	return -1;
    }

    // Catch failure caused by the DataSet operations.
    catch(DataSetIException error)
    {
    	error.printErrorStack();
    	return -1;
    }

    // Catch failure caused by the DataSpace operations.
    catch(DataSpaceIException error)
    {
    	error.printErrorStack();
    	return -1;
    }
	
    return 0;  // successfully terminated

}

```

`2. h5cpp_reading.cpp:`  

``` cpp
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * Copyright Â© 2020 Wei Wang.                                                  *
 * Created by WW on 2020/01/26.                                                *
 * All rights reserved.                                                        *
 *                                                                             *
 * This example illustrates how to read and edit an existing dataset.          *
 * Reference: HDF5 Tutorial (https://portal.hdfgroup.org/display/HDF5/HDF5)    *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

//
// h5cpp_reading.cpp
// CPP
//

#include <iostream>
#include <string>
#include "H5Cpp.h"

#ifndef _H5_NO_NAMESPACE_
using namespace H5;
#ifndef _H5_NO_STD_
    using std::cout;
    using std::endl;
#endif /* _H5_NO_STD_ */        
#endif /* _H5_NO_NAMESPACE_ */

/* 
 *  Define the names of HDF5 file, groups, datasets, and attributes.
 *  Use H5::H5std_string for name strings.
 */
const H5std_string  FILE_NAME("h5cpp_example.hdf5");
const H5std_string  GROUP_NAME("group1");
const H5std_string  DATASET_NAME("dset");
const H5std_string  ATTR_NAME("myAttr2");

int main (int argc, char **argv)
{
    
    // Try block to detect exceptions raised by any of the calls inside it.
    try
    {
        /*
    	 * Turn off the auto-printing when failure occurs so that we can
    	 * handle the errors appropriately
         */
    	Exception::dontPrint();

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 

        /* HOW TO DELETING A DATASET! */

        /*

        // Open an existing file.
        // H5::H5F_ACC_RDWR : read or edit an existing file.
        H5File file_d(FILE_NAME, H5F_ACC_RDWR);
        
        // Open an existing group.
        Group group_d = file_d.openGroup(GROUP_NAME);

        // Use H5::H5Ldelete to delete an existing dataset.
        int result = H5Ldelete(group_d.getId(), DATASET_NAME.c_str(), H5P_DEFAULT);
        // String.c_str() convert "string" to "const char *".

        cout << result << endl;     
        // Non-negtive: successfully delete; 
        // Otherwise: fail.

        // Save and exit the group.
        group_d.close();
        // Save and exit the file.
        file_d.close();
        // Important! The two close()s above can't be omitted! 
        // Otherwise, the deleting behavior won't be saved to file.

        */

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 

        // Open an existing file.
        // H5::H5F_ACC_RDWR : read or edit an existing file.
        H5File file(FILE_NAME, H5F_ACC_RDWR);
        
        // Open an existing group of the file.
        Group group = file.openGroup(GROUP_NAME);

        // Open an existing dataset of the group.
        DataSet dataset = group.openDataSet(DATASET_NAME);

        // Get the dataspace of the dataset.
    	DataSpace filespace = dataset.getSpace();

        // Get the rank of the dataset.
        int rank = filespace.getSimpleExtentNdims();

        // Use H5::hsize_t (similar to int) for dimensions
        hsize_t dims[rank];        // dataset dimensions

        // Get the dimensions of the dataset.
        rank = filespace.getSimpleExtentDims(dims);

        cout << DATASET_NAME << " rank = " << rank << ", dimensions "
                 << dims[0] << " x "
                 << dims[1] << endl;

        // Dataspace for data read from file.
        DataSpace myspace(rank, dims);

        double data_out[dims[0]][dims[1]];      // buffer for data read from file

        // Read data from file to buffer.
        dataset.read(data_out, PredType::NATIVE_DOUBLE, myspace, filespace);

        for (int i = 0; i < dims[0]; i++)
        {
            for (int j = 0; j < dims[1]; j++)
                cout << data_out[i][j] << " ";
            cout << endl;
        }

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 
        // Read the attribute of the dataset.
        cout << endl;

        // Open an existing attribute of the dataset.
        Attribute attr = dataset.openAttribute(ATTR_NAME);

        // Get the dataspace of the attribute.
        DataSpace attr_space = attr.getSpace();

        // Get the rank of the attribute.
        int attr_rank = attr_space.getSimpleExtentNdims();

        // Use H5::hsize_t (similar to int) for dimensions.
        hsize_t attr_dims[attr_rank];       // attribute dimensions

        // Get the dimension of the attribute.
        attr_rank = attr_space.getSimpleExtentDims(attr_dims);

        cout << ATTR_NAME << " rank = " << attr_rank << ", dimensions " << attr_dims[0] << endl;

        char attr_data_out[attr_dims[0]];   // buffer for attribute data read from file

        // Read attribute data from file to buffer.  
        attr.read(PredType::NATIVE_CHAR, attr_data_out);

        cout << attr_data_out << endl;

        /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */ 

        // Save and exit the group.
        group.close();
        // Save and exit the file.
        file.close();

    }  // end of try block

    // Catch failure caused by the H5File operations.
    catch(FileIException error)
    {
    	error.printErrorStack();
    	return -1;
    }

    // Catch failure caused by the DataSet operations.
    catch(DataSetIException error)
    {
    	error.printErrorStack();
    	return -1;
    }

    // Catch failure caused by the DataSpace operations.
    catch(DataSpaceIException error)
    {
        error.printErrorStack();
        return -1;
    }

    return 0;  // successfully terminated
    
}

```

## **æ€»ç»“**

<hr style="height:5px;" />

æ›´å¤šé«˜çº§ **API** (Application Program Interface) çš„è°ƒç”¨ï¼Œå¦‚ **Subset**, **Hyperslab**, **Chunk** , **Compress**, **Single-Writer/Multiple-Reader** (SWMR), **Parallel HDF5** (å³ **HDF5 MPI - Message Passing Interface** å¹¶è¡Œè¯»å†™) ä»¥åŠ **Virtual Dataset** (VDS) ç­‰ï¼Œå¯ä»¥æŸ¥é˜…å®˜ç½‘çš„ [**Documentation**](https://portal.hdfgroup.org/display/HDF5/HDF5)ã€‚

é™¤äº†å‚¨å­˜æ•°ç æ•°æ®ï¼Œ**HDF5** æ–‡ä»¶è¿˜å¯ä»¥ç”¨äºå­˜å‚¨å›¾åƒã€PDFæ–‡ä»¶ï¼Œç”šè‡³ Excel æ–‡ä»¶ï¼Œä½†æ˜¯é‰´äºæˆ‘ç›®å‰çš„ç§‘ç ”éœ€æ±‚ï¼Œè¿˜æ˜¯ .tsv å’Œ .txt æ›´é€‚åˆæˆ‘ï¼Œæ¯•ç«ŸæŸ¥çœ‹èµ·æ¥æ›´ç®€å•ï¼Œè·¨å¹³å°è·¨è¯­è¨€è¯»å†™ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œ[ä¸Šä¸€ç¯‡æ–‡ç« ]({{ site.url }}/2020/01/26/CSV.html)ä¸­è®¨è®ºçš„ .csv æ–‡ä»¶éƒ½å·²ç»ç®—æ˜¯æ¯”è¾ƒé«˜çº§çš„æ•°æ®å‚¨å­˜æ ¼å¼äº†ğŸ˜†ã€‚ ğŸ‰ ğŸ‰ ğŸ‰ 

&ensp;

[<b><u>Go to the Home Page</u></b>]({{ site.url }}{{ site.baseurl }})

&ensp;

<center class="half">
<font color="#26975b"><b>Sponsor the author </b></font><font color="#08a2e4"><b>if you like the contents!</b></font><br/><br/>
</center>

<center class="half">
    <img src="https://nono721-1300921342.cos.ap-shanghai.myqcloud.com/WechatPay.png" width="251" style="margin-right:10px;margin-left:10px"/><img src="https://nono721-1300921342.cos.ap-shanghai.myqcloud.com/AliPay.png" width="250" style="margin-right:10px;margin-left:10px"/>
</center>

&ensp;












